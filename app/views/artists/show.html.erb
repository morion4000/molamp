<% title @artist['name'], false %>

<div class="row-fluid">
  <div class="span3">
  	<%= image_tag @artist['image'][4]['content'], :alt => @artist['name'] %>
  </div>
  <div class="span9">
  	<h2><%= @artist['name'] %></h2>
	<p>
		<strong><%= @artist['stats']['listeners'] %></strong> listeners on Last.fm<br />
		<%= @artist.has_key?('bio') ? Sanitize.clean(@artist['bio']['summary']) : 'No bio' %>
	</p>
	Similar:
	
	<ul class="thumbnails">
	<% @artist['similar']['artist'].each do |artist| %>
	  <li class="span2" style="background-color: #fff;">
	    <div class="thumbnail">
	      <%= image_tag artist['image'][1]['content'], :alt => artist['name'] %>
	      <center><%= link_to artist['name'], '/artists/' + url_to_lastfm(artist['name']) %></center>
	    </div>
	  </li>
	<% end %>
	</ul>
  </div>
</div>

<div class="row-fluid">
	<div class="span9">
		<table class="table table-striped table-bordered table-condensed">
			<thead></thead>
			<tbody>
				<% i=0; @top_tracks.each do |track| %>
				<tr>
					<td><%= i+1 %></td>
					<td>
						<div class="row-fluid">
		  					<div class="span1">
		  						<%= track['image'] ? image_tag(track['image'][1]['content'], :alt => track['name']) : image_tag('noimage.jpg', :alt => 'Sorry, no image available') %>
		  					</div>
		  					<div class="span11">
		  						<h4><%= link_to(track['name'], 'javascript:Playlist.play("'+i.to_s()+'")') %></h4><br />
		  						<strong><%= track['playcount'] %></strong> played on Last.fm
		  					</div>
						</div>
					</td>
				</tr>
				<% i=i+1; end %>
			</tbody>
		</table>
	</div>
	<div class="span3">
		<div id="ytplayer" style="width:200px;height:250px;"></div>
	</div>
</div>

<script type="text/javascript">
$(function() {
	Playlist.artist = "<%= @artist['name'] %>";
	<% i=0; @top_tracks.each do |track| %>
	Playlist.tracks.push({uid: <%= i.to_s() %>, title: "<%= track['name'] %>"});
	<% i=i+1; end %>
});
</script>